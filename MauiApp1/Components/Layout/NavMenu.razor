<div class="top-row ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="">Speedrun Timer</a>
    </div>
</div>

<input type="checkbox" title="Navigation menu" class="navbar-toggler" />

<div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()">
    <button class="addTimer" @onclick="addTimer">+</button>
    <nav class="flex-column">
        @foreach (var timer in timersList)
        {
            <div class="nav-item px-3">
                <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                    <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> @timer.Name
                </NavLink>
            </div>
        }
    </nav>
</div>

@code {
    private List<Timer> timersList = new List<Timer>();

    private async void addTimer()
    {
        string name = await App.Current.MainPage.DisplayPromptAsync("New Timer", "Enter name:");

        if (name != null)
        {
            if (string.IsNullOrWhiteSpace(name))
            {
                name = "New Timer";
            }
            Timer timer = new Timer
            {
                Index = 0,
                Record = "",
                splitIndex = 0,
                Name = name
            };

            timersList.Add(timer);
            await InvokeAsync(StateHasChanged);
        }
    }

    [Table("timer")]
    public class Timer
    {
        [PrimaryKey]
        [Column("index")]
        public int Index { get; set; }

        [Column("record")]
        public string? Record { get; set; }

        [Column("splitIndex")]
        public int splitIndex { get; set; }

        [Column("name")]
        public string? Name { get; set; }
    }
}